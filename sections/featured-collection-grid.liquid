{% assign c = section.settings.collection %}
<section class="container" style="padding:40px 0">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
    <h2 style="margin:0">{{ section.settings.title }}</h2>
    {% if c %}<a class="btn btn--ghost" href="{{ c.url }}">View all</a>{% endif %}
  </div>

  {% if c and c.products_count > 0 %}
    <div class="grid grid--4">
      {% for product in c.products limit: section.settings.limit %}
        {% render 'product-card', product: product %}
      {% endfor %}
    </div>
  {% else %}
    <p>No products found. Pick a collection in the section settings.</p>
  {% endif %}
</section>

{% schema %}
{
  "name": "Featured collection grid",
  "settings": [
    { "type": "text", "id": "title", "label": "Title", "default": "Featured products" },
    { "type": "collection", "id": "collection", "label": "Collection" },
    { "type": "range", "id": "limit", "min": 4, "max": 16, "step": 1, "default": 8, "label": "Products to show" }
  ],
  "presets": [{ "name": "Featured collection grid" }]
}
{% endschema %}
